<!DOCTYPE html>
<html>

  <head>
  <link rel="icon" href="http://www.bebetterdeveloper.com/img/favicon.ico" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Serverless system architecture using AWS, React and Node.js</title>
  <meta name="description" content="This post is about my most recent freetime-killer “DIY project” - Price tracker, which has a beautiful serverless architecture that I want to share with all ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.bebetterdeveloper.com/coding/architecture/serverless-system-architecture-using-aws.html">
  <link rel="alternate" type="application/rss+xml" title="Be a Better Developer" href="http://www.bebetterdeveloper.com/feed.xml" />

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css'>
    
  <!-- Prepare first post's image source -->



    

    
        
            
            
            
            
            
            
<!-- Open graph tags -->
<meta property="og:title" content="Serverless system architecture using AWS, React and Node.js">
<meta property="og:type" content="article">
<meta property="og:url" content="http://www.bebetterdeveloper.com/coding/architecture/serverless-system-architecture-using-aws.html">
<meta property="og:image" content="http://www.bebetterdeveloper.com/img/post_img/pt-architecture.png">

<meta property="og:description" content="This post is about my most recent freetime-killer “DIY project” - Price tracker, which has a beautiful serverless architecture that I want to share with all ...">
<meta property="og:site_name" content="Be a Better Developer">




<meta property="article:published_time" content="2016-01-22T00:00:00-08:00">
<meta property="article:author" content="https://www.facebook.com/jelena.fiodorova">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/coding/getting-started-react-redux.html">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/coding/getting-started-react-flux.html">
  



  
<meta property="article:section" content="Coding">
  



  
<meta property="article:tag" content="JavaScript">
  
<meta property="article:tag" content="Node.js">
  
<meta property="article:tag" content="React">
  
<meta property="article:tag" content="Flux">
  
<meta property="article:tag" content="ES2015">
  
<meta property="article:tag" content="AWS">
  
<meta property="article:tag" content="Lambda">
  
<meta property="article:tag" content="DynamoDB">
  
<meta property="article:tag" content="API Gateway">
  
<meta property="article:tag" content="SNS">
  
<meta property="article:tag" content="S3">
  

</head>


  <body>

    <div class="site-header">

    <nav class="site-nav">
        <a class="page-link" href="/" >Home</a>
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/categories.html">Categories</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
    </nav>

    <h1>
     <span>
      <a class="site-title" href="/">Be a Better Developer</a>
     </span>
    </h1>


</div>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
     <h1 class="post-title">Serverless system architecture using AWS, React and Node.js</h1>
     <p class="post-meta">Posted by <em> Lena Barinova</em> on Jan 22, 2016</p>
<br>
  <span > 
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.bebetterdeveloper.com/coding/architecture/serverless-system-architecture-using-aws.html" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-facebook fa-stack-1x"></i>
        </span>
    </a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://www.bebetterdeveloper.com/coding/architecture/serverless-system-architecture-using-aws.html&title=Serverless system architecture using AWS, React and Node.js&summary=Hosting a website, running scheduled computations and sending email notifications - all done using AWS services&source=http://www.bebetterdeveloper.com/" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
    </a>
    <a href="https://twitter.com/home?status=Reading %20%22Serverless system architecture using AWS, React and Node.js%20%22 on http://www.bebetterdeveloper.com/coding/architecture/serverless-system-architecture-using-aws.html %20%23bebetterdeveloper%0A" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
    </a>
  </span>
  <span>
    
      
      <a class="category" href="http://www.bebetterdeveloper.com/categories.html#Coding"> Coding</a>
      
      <a class="category" href="http://www.bebetterdeveloper.com/categories.html#Architecture"> Architecture</a>
      
  </span>  
  </header>
  
  
  <article class="post-content">
    <p>This post is about my most recent freetime-killer “DIY project” - <a href="http://price-tracker-website.s3-website-us-west-2.amazonaws.com/">Price tracker</a>, which has a beautiful serverless architecture that I want to share with all of your.</p>

<p>The story behind this app: I want to buy some items (such as skiing goggles, or new luggage set, or shoes), I want to get them for the best price and these items are not urgent for me so I can wait for a price drop. But I don’t want to hunt for sales and constantly check online stores for price decrease. I’ve got better things to do :)</p>

<p>So I’ve developed a system, which tracks price changes for my desirable products in online stores (which I trust to buy from) and notifies me over the email when price drops.</p>

<h2 id="architecture">Architecture</h2>

<p>There are three major parts of the system:</p>

<ol>
  <li><a href="/coding/architecture/serverless-system-architecture-using-aws.html#website">Website</a> - to view the products and recent prices in different shops</li>
  <li><a href="/coding/architecture/serverless-system-architecture-using-aws.html#watcher">Watcher</a> - a job scheduled to scrape online shops and track price changes every couple of hours</li>
  <li><a href="/coding/architecture/serverless-system-architecture-using-aws.html#notifier">Notifier</a> - a job to watch changes to the price and notify me over the email when the price drops</li>
</ol>

<p>In addition to these parts - there is a database to hold all my products, shops and price changes.</p>

<h2 id="technologies">Technologies</h2>

<p>In autumn 2015 I won a $100 AWS credit as a HackersRank prize in an algorithms coding contest and I decided to make a good use of it. So the platform of a choice to build this system is AWS. In addition to that, lately I am focused on everything JavaScript, thus the language of a choice is JavaScript: both for a frontend - React.js and backend - Node.js.</p>

<p>Here is the architecture:
<img src="/img/post_img/pt-architecture.png" alt="Architecture" class="right" /></p>

<h2 id="implementation">Implementation</h2>

<p>The sources are in Github at <a href="https://github.com/LenaBarinova/PriceTracker">LenaBarinova/PriceTracker</a>. 
Now shortly about how I implemented each of my three major system components.</p>

<h4 id="website">Website</h4>

<p>My Website - is a quite simple Single Page Application done in React using Flux pattern to handle UI changes. Website gets information about the products via a REST API implemented through AWS API Gateway, which calls AWS Lamdba function (written in Node.js) to actually get data from database. I use DynamoDB as a database, storing all of my products as JSON objects. UI is built using Bootstrap and some more advanced css styles to create flipping cards effects for products.</p>

<p>Here’s how it looks:</p>

<p><img src="/img/post_img/pt-ui.gif" alt="Price Tracker UI" /></p>

<p>Tests for UI are written in Mocha. Website is hosted in Amazon S3. For deployment I use Gulp and many Gulp plugins to transpose, convert from ES6, concatenate and minify my JavaScript files, run tests, bundle all together and upload to S3 bucket.</p>

<h3 id="watcher">Watcher</h3>

<p>Watcher is AWS Lambda function implemented in Node.js. It queries a database, gets all the products and runs scrapers for each product to retrieve a new price from online stores. Scraper function is specific for each store, it loads shop’s html and gets/parses price fields using jQuery selectors. If there is change in price - product is updated with a new price and persisted to DynamoDB.</p>

<p>Watcher is scheduled to run every 4 hours using AWS CloudWatch Events.</p>

<h3 id="notifier">Notifier</h3>

<p>One more AWS Lambda function which listens to events in DynamoDB and if there is a price decrease - it sends email notification using AWS SNS service.</p>

<p>All AWS Lambda functions are written in JavaScript and tested using Mocha. Deployment is as easy as running “gulp deploy” task - it runs tests, gets all dependant node modules, zips all files together and uploads my JavaScript code to AWS as Lamdba functions.</p>

<h2 id="pros-and-cons">Pros and Cons</h2>

<p>Though it’s nice not to have a server and run everything on different services, and Lambda is a kind of magic, there are some drawbacks to it. In my case it’s perfect for Watcher and Notifier, but not that good for a data retrieval from DynamoDB. The problem is that in order to run Lambda function there is a lot of work done in the background (container creation, environment configuration, etc.) before actually running my function, that takes some time. When the task is a background job - it’s totally fine, but with UI - it gives me undesirable lag before loading my products for the first time. I don’t worry about it now, because I’m the only user of this system and visit this site once a week or so, but if someday there is more users than me, I’ll definitely look into it and refactor this part of the system.</p>

<p>Besides this small issue, everything else works as a charm. And with deployment automation - it is a real pleasure to work on this “project”.</p>

<p>Happy Architecting!</p>

<p><em>P.S.: If you want to hear more about any part of this system - just leave a comment. And if you by any chance would like to try PriceTracker yourself - let me know, I’d be happy to set up it for you.</em></p>

  </article>
  
  <div class="container" style="margin-top:1em;">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'beabetterdeveloper'; 
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </div>
      </div> 
      <hr>

</div>
      </div>
    </div>

    <div class="footer" align="center">
<div class="container">
                          <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                                       
                           <a href="https://www.linkedin.com/in/sergejus">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                      
                    
                        <a href="https://github.com/sergejusb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    
                    
                        <a href="https://twitter.com/sergejusb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    
                <p class="copyright text-muted">Copyright &copy; Be a Better Developer 2016</p>
            </div>
        </div>
    </div>

</div>
<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39383708-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
