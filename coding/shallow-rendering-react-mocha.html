<!DOCTYPE html>
<html>

  <head>
  <link rel="icon" href="http://www.bebetterdeveloper.com/img/favicon.ico" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Testing React components using Shallow Rendering</title>
  <meta name="description" content="This is a continuation of Getting started w/ React &amp; Mocha blog post. Here I’ll shortly describe one more alternative how to test a React component.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html">
  <link rel="alternate" type="application/rss+xml" title="Be a Better Developer" href="http://www.bebetterdeveloper.com/feed.xml" />

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css'>
    
  <!-- Prepare first post's image source -->



    

    
        
            
            
            
            
            
            
<!-- Open graph tags -->
<meta property="og:title" content="Testing React components using Shallow Rendering">
<meta property="og:type" content="article">
<meta property="og:url" content="http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html">
<meta property="og:image" content="http://www.bebetterdeveloper.com/img/post_img/react-logo.png">

<meta property="og:description" content="This is a continuation of Getting started w/ React &amp; Mocha blog post. Here I’ll shortly describe one more alternative how to test a React component.">
<meta property="og:site_name" content="Be a Better Developer">




<meta property="article:published_time" content="2015-11-24T00:00:00-08:00">
<meta property="article:author" content="https://www.facebook.com/jelena.fiodorova">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/coding/getting-started-react-flux.html">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/coding/hello-world-python.html">
  
<meta property="og:see_also" content="http://www.bebetterdeveloper.com/deployment/sharing-a-blog-post-hosted-on-github-pages.html">
  



  
<meta property="article:section" content="coding">
  



  
<meta property="article:tag" content="JavaScript">
  
<meta property="article:tag" content="Mocha">
  
<meta property="article:tag" content="Gulp">
  
<meta property="article:tag" content="ES2015">
  
<meta property="article:tag" content="React">
  
<meta property="article:tag" content="Shallow rendering">
  

</head>


  <body>

    <div class="site-header">

    <nav class="site-nav">
        <a class="page-link" href="/" >Home</a>
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/categories.html">Categories</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
    </nav>

    <h1>
     <span>
      <a class="site-title" href="/">Be a Better Developer</a>
     </span>
    </h1>


</div>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
     <h1 class="post-title">Testing React components using Shallow Rendering</h1>
     <p class="post-meta">Posted by <em> Lena Barinova</em> on Nov 24, 2015</p>
<br>
  <span > 
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-facebook fa-stack-1x"></i>
        </span>
    </a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html&title=Testing React components using Shallow Rendering&summary=Instructions on how to setup your tests without using DOM&source=http://www.bebetterdeveloper.com/" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
    </a>
    <a href="https://twitter.com/home?status=Reading %20%22Testing React components using Shallow Rendering%20%22 on http://www.bebetterdeveloper.com/coding/shallow-rendering-react-mocha.html %20%23bebetterdeveloper%0A" target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fa fa-square-o fa-stack-2x"></i>
            <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
    </a>
  </span>
  <span>
    
      
      <a class="category" href="http://www.bebetterdeveloper.com/categories.html#coding"> Coding</a>
      
  </span>  
  </header>
  
  
  <article class="post-content">
    <p>This is a continuation of <a href="http://www.bebetterdeveloper.com/coding/getting-started-react-mocha.html">Getting started w/ React &amp; Mocha</a> blog post. Here I’ll shortly describe one more alternative how to test a React component.
<img src="/img/post_img/react-logo.png" alt="React logo" class="right" /></p>

<h2 id="set-up">Set-up</h2>

<p>Code for this example can be found on <a href="https://github.com/LenaBarinova/react-mocha-example/tree/shallow-rendering">GitHub</a>. After downloading the code, run</p>

<pre><code>$npm install
</code></pre>

<p>followed by</p>

<pre><code>$npm test
</code></pre>

<p>or this gulp command:</p>

<pre><code>$gulp build
</code></pre>

<p>If you are using Visual Studio Code - you can build it using <code>⇧⌘B</code> (on Mac).</p>

<h2 id="testing">Testing</h2>

<p>So I have this react component, named <em>VeryFirstDiv</em>:
<script src="https://gist.github.com/LenaBarinova/04649597e425254ad5ae.js"></script></p>

<p>In my previous post to test it I was creating fake DOM using JSDOM library and then rendering my testable component into this fake DOM (Read more about it <a href="http://www.bebetterdeveloper.com/coding/getting-started-react-mocha.html#step-3-adding-first-mocha-test">here</a>).</p>

<p>This time I’ll only use <a href="https://www.npmjs.com/package/react-addons-test-utils">React TestUtils add-on</a> and rather new feature of it - <a href="https://facebook.github.io/react/docs/test-utils.html#shallow-rendering">Shallow Rendering</a>.</p>

<blockquote>
  <p>Shallow rendering is an experimental feature that lets you render a component “one level deep” and assert facts about what its render method returns, without worrying about the behavior of child components, which are not instantiated or rendered. This does not require a DOM.</p>
</blockquote>

<p>In my test I create an instance of Shallow Renderer:</p>

<pre><code class="language-javascript">let renderer = ReactTestUtils.createRenderer();
</code></pre>

<p>Then, render my <em>VeryFirstDiv</em> component using this <em>renderer</em></p>

<pre><code class="language-javascript">renderer.render(&lt;VeryFirstDiv /&gt;);
</code></pre>

<p>and get the output:</p>

<pre><code class="language-javascript">myDiv = renderer.getRenderOutput();
</code></pre>

<p>At this point you can check anything you fancy. I’ll for example want to test whether it is of a type ‘div’ and does it have a class named “veryFirstDiv”
Here’s my test:
<script src="https://gist.github.com/LenaBarinova/ee83bdfc9330b14ee6d2.js"></script></p>

<p>For a comparison, I’ve created same test as in using DOM version:
<script src="https://gist.github.com/LenaBarinova/44b3a2a997865777a0b2.js"></script></p>

<h2 id="summary">Summary</h2>

<p>Testing using Shallow Rendering is faster. You can even notice it on this small example: my test using fake DOM runs for <em>~50ms</em>, while using Shallow Rendering test takes only <em>10ms</em>. I believe the gain is even more significant on big projects. And as a pleasant side effect it doesn’t require additional libraries.</p>

<p>Happy Testing!</p>

  </article>
  
  <div class="container" style="margin-top:1em;">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'beabetterdeveloper'; 
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </div>
      </div> 
      <hr>

</div>
      </div>
    </div>

    <div class="footer" align="center">
<div class="container">
                          <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                                       
                           <a href="https://www.linkedin.com/in/sergejus">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                      
                    
                        <a href="https://github.com/sergejusb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    
                    
                        <a href="https://twitter.com/sergejusb">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    
                <p class="copyright text-muted">Copyright &copy; Be a Better Developer 2016</p>
            </div>
        </div>
    </div>

</div>
<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39383708-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
